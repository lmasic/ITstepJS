
<!DOCTYPE html>
<html lang="cs">
<head>
    <meta http-equiv="Cache-Control" content="no-store" />
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <script>
window.addEventListener("DOMContentLoaded", (event) => {
    
    var i=0;
    let btn = document.getElementById('btn-create');
        
        btn.addEventListener('click', (e) => {
            //TODO: kontrola, zda to není prázdné
            let name=document.getElementById("name").value;

            if (name=="") {return;}   

            let text=document.getElementById("text").value;
            let task="<div class='task task"+i+"'><h1>"+name+"</h1><p>"+text+"</p></div>";
            let check = document.createElement("input");
            check.setAttribute("type", 'checkbox');
            check.addEventListener('click', (e) => {
                var target = e.target;
                var parent = target.parentElement;
                completed(parent);

            });

            
            
            document.getElementById("tasks").insertAdjacentHTML('beforeend',task);// https://stackoverflow.com/questions/7327056/appending-html-string-to-the-dom    
            
            document.querySelector(".task"+i).insertAdjacentElement("afterbegin",check);
            
            document.getElementById("name").value="";
            document.getElementById("text").value="";
            i++;
       
        });


        

});
function completed(elm) {

elm.classList.add("completed");

}
</script>
 
<style>
    .task {min-height: 30px;border:1px solid red;}
    .task input, .task p {display: inline-block;}
    body {margin:10px}
    section {width:33%;}
    form  {width:33%;margin-bottom:10px}
    form * {width:100%}
    .completed {color:grey}
</style>
<body>
    <form>
        <input type="text" id="name" placeholder="název úkolu"><br>
        <textarea rows="3" cols="15" id="text"></textarea><br>
        <input type="button" value="vytvoř" id="btn-create">
    </form>
<section id="tasks">



</body>
</section>
</html>